
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ECharts 学习笔记</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=2.0">
<link rel="stylesheet", href="/css/style.css">
<link rel="shortcut icon", href="/assets/favicon.ico">
<link rel="apple-touch-icon", sizes="128x128", href="/assets/tree-128x128.png">

        
    
        <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    
    <link rel='stylesheet' href="/./css/codestyle.css">

    <meta name="generator" content="Hexo 5.2.0"></head>
    <body>
        <header class="al_header al_pos_fixed">
    <div class="al_header_container dis_flex_jcenter">
        <div class="al_header_container_left">
            <div class="al_header_site_title">
                <a href="/">Dustin's blog</a>
            </div>
        </div>

        <div class="dis_flex_jcenter">
            <div class="al_header_nav_bar">
            <div class="al_header_menu">
                <a class="al_header_menu_item" href="/">首页</a>
            </div>
            <div class="al_header_menu">
                <a class="al_header_menu_item" href="/archives">归档</a>
            </div>
            <div class="al_header_menu">
                <a class="al_header_menu_item" href="https://timegarage.github.io/Just-CSS-it/">CSS</a>
            </div>
            <div class="al_header_menu">
                <a class="al_header_menu_item" href="https://timegarage.github.io/WebInterview/">面经</a>
            </div>
            <div class="al_header_menu">
                <a class="al_header_menu_item" target="_blank" rel="noopener" href="https://500px.com.cn/dustinpeng">摄影</a>
            </div>
            <div class="al_header_menu">
                <a class="al_header_menu_item" target="_blank" rel="noopener" href="https://www.linkedin.com/in/dustinpeng/">简历</a>
            </div>
            </div>
            <div class="al_header_setting">
                <svg class="al_header_icon">
                    <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-menu"></use>
                </svg>
            </div>
        </div>
    </div>
</header>

        <div class="al_sidebar">

    <div class="al_sidebar_overlay al_full_cover"></div>

    <div class="al_pos_fixed al_sidebar_cnt">
        <div class="dis_flex_acenter al_sidebar_header">
            <h3>Dustin's blog</h3>
            <div class="al_sidebar_close al_header_setting">
                <svg class="al_header_icon">
                    <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-close"></use>
                </svg>
            </div>
        </div>

        <div class="al_sidebar_author_cnt">

            <div class="al_sidebar_author_info">
                <h4>自我介绍</h4>
                <p>你好，我是彭俊，一名热爱数据分析与软件开发的学生，致力于运用科学技术提升人们的生活体验。</p>
                <p>我是北京大学计算机专业的硕士研究生，目前在腾讯公司作为前端开发实习生参与暑期实习。</p>
                <p>在闲暇时光，我喜欢带着相机去旅行，走过大街小巷，感受生活的气息。</p>
                <p>如果你想和我讨论软件开发或是摄影方面的问题，欢迎随时与我联系。</p>
            </div>

            
                <div class="al_sidebar_contact_info">
                    <h4>联系方式</h4>
                    <p>电子邮箱: 82610725@163.com</p>
                    <p>微信: TimeGarage</p>

                    <div class="dis_flex al_sidebar_social_widget">
                        
                        
                            <div class="al_social_icon_cnt" data_link="https://www.github.com/TimeGarage">
                                <svg class="al_social_icon" id="github">
                                    <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#icon_github"></use>
                                </svg>
                            </div>
                        
                    </div>
                </div>
            
        </div>
    </div>
</div>

        
    <div class="dis_flex_center al_lightbox_cnt al_full_cover">
        <img class="al_lightbox_img"/>
    </div>
    <div class="al_page_background dis_flex_center al_full_cover"></div>
    <div class="al_page_container">
        <div class="al_pos_ab al_fake_background"></div>
        <div class="al_main_container al_shadow al_main_page_container">
            <article class="al_article">
                <header>
                    <h1 class="al_page_title">
                        ECharts 学习笔记
                    </h1>
                    <div class="al_page_info dis_flex">
                        <div class="al_page_content_info">
                            2020年12月03日
                        </div>

                        
                            <div class="al_page_content_info">
                                全文共923字
                            </div>
                        
                        <span class="tags"></span>
                    </div>
                </header>

                
                    <div class="al_page_content_outline">
                        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="toc-text">使用流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5-ECharts"><span class="toc-text">导入 ECharts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%9B%BE%E8%A1%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">创建图表实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E4%BA%92%E9%80%BB%E8%BE%91"><span class="toc-text">交互逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-Toolbox"><span class="toc-text">自定义 Toolbox</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%B8%8E%E8%A1%8C%E4%B8%BA"><span class="toc-text">事件与行为</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6"><span class="toc-text">事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E4%B8%BA"><span class="toc-text">行为</span></a></li></ol></li></ol></li></ol>
                    </div>
                

                
                <section id="post-body">
                    <p>本文旨在对数据可视化框架 ECharts 的文档进行梳理，同时结合网络流量分析项目给出自己的思考。</p>
<a id="more"></a>

<h2 id="使用流程"><a href="#使用流程" class="headerlink" title="使用流程"></a>使用流程</h2><h3 id="导入-ECharts"><a href="#导入-ECharts" class="headerlink" title="导入 ECharts"></a>导入 ECharts</h3><p>使用 ECharts 之前，需要将 ECharts 框架导入到工程项目中。ECharts 支持使用标签的方式导入 (<code>&lt;script src=&quot;echarts.min.js&quot;&gt;</code>)，同时也支持用户使用 npm 获取 echarts。如果你的项目正在使用 Vue、React 等工程化框架，那么推荐使用 npm 作为导入 ECharts 的方式。</p>
<h3 id="创建图表实例"><a href="#创建图表实例" class="headerlink" title="创建图表实例"></a>创建图表实例</h3><p>ECharts 图表实例的创建流程如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">graph LR<br>A (创建具备宽高的 DOM) --&gt; B (初始化 ECharts 实例) <br>B --&gt; C (设置图表配置项) <br>C --&gt; D (设置展示数据)<br></code></pre></td></tr></table></figure>

<p>ECharts 提供了 setOption () 函数来更新图形，每当该函数被调用时，ECharts 会比较前后两次数据的差异，并使用合适的动画来呈现图形的变化。实际上，如果只是创建简单的图形，只需要根据需求修改对应的配置项即可。ECharts 所有的配置项可以参考 <a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/option.html#title">ECharts 文档 - 配置项</a>。</p>
<h2 id="交互逻辑"><a href="#交互逻辑" class="headerlink" title="交互逻辑"></a>交互逻辑</h2><h3 id="自定义-Toolbox"><a href="#自定义-Toolbox" class="headerlink" title="自定义 Toolbox"></a>自定义 Toolbox</h3><p>ECharts 自带了 toolbox 帮助用户实现各种简单的交互逻辑：</p>
<ul>
<li>saveAsImage =&gt; 保存图片</li>
<li>restore =&gt; 配置项还原</li>
<li>dataView =&gt; 数据视图工具</li>
<li>dataZoom =&gt; 数据区域缩放</li>
<li>magicType =&gt; 动态类型切换</li>
<li>brush 选择组件的控制按钮</li>
</ul>
<p>除此之外，用户也可根据自己的需要添加 toolbox 按钮和对应的 click 响应事件。需要注意的是，添加到 toolbox 中的自定义 feature 均需要以 my 开头。</p>
<h3 id="事件与行为"><a href="#事件与行为" class="headerlink" title="事件与行为"></a>事件与行为</h3><p>在网络流量分析项目中，对 brush 选框交互有着独特的需求。例如，需要限定用户最多只能刷选两次，每次的刷选框需要用不同的颜色标记，同时要在刷选框上方给出区间提示等。对于这种自定义的复杂交互逻辑，需要使用 ECharts 提供的 events 和 actions 接口解决。</p>
<h4 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h4><p>ECharts 主要通过 on 方法添加事件处理函数，所有的 ECharts 事件列表参考 <a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/api.html#events">ECharts 文档 - events</a>。</p>
<p>ECharts 中的事件主要有两种，一种是鼠标事件（如鼠标单击、双击和悬浮等），一种是使用交互组件（如 datazoom 组件和 brush 组件）后触发的事件。鼠标事件可参考 <a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/api.html#events">ECharts 文档 - 鼠标事件</a>，在此不再赘述。本文研究的重点是 brush 组件的交互事件，因此会对这部分内容进行详细的介绍。</p>
<p>brush 组件是选框组件，适用于用户想要选择一段时间范围的情况。brush 组件有三个重要的交互事件，分别是 brush、brushEnd 和 brushselected 事件。</p>
<ul>
<li>brush =&gt; 选框正在添加事件</li>
<li>brushEnd =&gt; 选框添加完毕事件</li>
<li>brushselected =&gt; 对外通知当前选择区域事件</li>
</ul>
<p>默认情况下，刷选或移动选区时，会不断触发 brushSeleted 事件，这可能会导致页面性能问题。好在 ECharts 提供了防抖和节流的配置选项 throttleDelay，用户可以根据自身需要设置触发阈值。</p>
<h4 id="行为"><a href="#行为" class="headerlink" title="行为"></a>行为</h4><p>除了用户的交互操作，在程序里调用方法触发图表的行为即为 action。在 ECharts 3 中通过调用 myChart.dispatchAction ({ type: ‘’ }) 触发图表行为。和 brush 组件相关的 action 的使用方法可以参考 <a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/api.html#action.brush">ECharts 文档 - action.brush</a>。</p>
<ul>
<li>action.brush.brush =&gt; 刷选动作进行中触发，可设置或删除 chart 中的选框。</li>
<li>action.brush.brushEnd =&gt; 刷选动作完毕时自动触发该 action。</li>
<li>action.brush.takeGlobalCursor =&gt; 将鼠标变更为可刷选状态。</li>
</ul>

                </section>
                
                
    <div id="al_gitalk_cnt">
    <script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
    <script>
        var gitalk = new Gitalk({
            clientID: "447058976c8bd4fe04f6",
            clientSecret: "338d276a77fb63da17761fc5f39458092c228396",
            repo: "Gitalk",
            owner: "TimeGarage",
            admin: "TimeGarage",
            id: "ECharts 学习笔记",
        });
        gitalk.render("al_gitalk_cnt")
    </script>
                

            
            <nav class="dis_flex al_post_nav">
                <a class="al_post_nav_item dis_flex_acenter" href="/2021/11/28/Chrome%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%80%BB%E7%BB%93/">
                    
                        <svg class="al_arrow">
                            <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-arrow-left"></use>
                        </svg>
                        <span class="al_text_ellipsis al_post_nav_desc">Chrome 快捷键总结</span>
                    
                </a>
                <a class="al_post_nav_item dis_flex_acenter" href="/2020/11/26/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BD%91%E7%AB%99/">
                    
                        <span class="al_text_ellipsis al_post_nav_desc">有趣的网站</span>
                        <svg class="al_arrow">
                            <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-arrow-right"></use>
                        </svg>
                    
                </a>
            </nav>
            </article>
        </div>
    </div>


        <div class="al_index_footer dis_flex_center">
    <div class="al_index_footer_item al_index_footer_title">
        Dustin
    </div>

    
    

    <div class="al_index_footer_item al_index_footer_extra_right">
        Copyright © 2021
    </div>
</div>

        <script type="text/javascript" async="async" src="/javascripts/acelog.js"></script>
        
    <script src="//hm.baidu.com/hm.js?59a58849119e55e53bb312970497c6a0"></script>

        
    </body>
</html>
        